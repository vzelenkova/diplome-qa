# План автоматизации

## Перечень автоматизируемых сценариев
#### 1.1 Валидные данные

Используются как база для позитивных сценариев:

* Номер карты: 4444 4444 4444 4441 (статус APPROVED)
* Месяц: от 01 до 12, текущий или будущий год
* Год: текущий или следующий, в формате YY
* Владелец: ИМЯ ФАМИЛИЯ (латиница, заглавные буквы)
* CVC/CVV: 123 (3 цифры)

#### 1.2 Позитивные сценарии

1. Покупка тура по карте со статусом APPROVED
   Тестовые данные: Номер карты 4444 4444 4444 4441, остальные данные валидные
   Целевое действие: Нажать “Продолжить”
   Ожидаемый результат: Появляется уведомление “Операция одобрена Банком”, в БД таблице payment_entity создаётся запись со статусом APPROVED.

2. Покупка тура в кредит со статусом APPROVED
   Тестовые данные: Номер карты 4444 4444 4444 4441, остальные данные валидные
   Целевое действие: Нажать “Продолжить”
   Ожидаемый результат: Появляется уведомление “Операция одобрена Банком”, в таблице credit_request_entity создаётся запись со статусом APPROVED.

3. Покупка тура по карте со статусом DECLINED
   Тестовые данные: Номер карты 4444 4444 4444 4442, остальные данные валидные
   Целевое действие: Нажать “Продолжить”
   Ожидаемый результат: Появляется уведомление “Ошибка! Банк отказал в проведении операции”, в БД сохраняется статус DECLINED.

#### 1.3 Негативные сценарии

Проверки на клиентскую и серверную валидацию для формы оплаты и кредита (раздельно). Во всех случаях остальные данные валидные, нажимается “Продолжить”.

1. Пустое поле “Номер карты”
   Тестовые данные: Поле “Номер карты” оставлено пустым
   Ожидаемый результат: Под полем появляется сообщение “Поле обязательно для заполнения”.

2. Некорректный номер карты (меньше 16 цифр)
   Тестовые данные: Номер карты: 4444 4444 4444
   Ожидаемый результат: Под полем появляется сообщение “Неверный формат”.

3. Пустое поле “Месяц”
   Тестовые данные: Поле “Месяц” пустое
   Ожидаемый результат: Под полем появляется сообщение “Поле обязательно для заполнения”.

4. Месяц вне диапазона (например, 13)
   Тестовые данные: Месяц: 13
   Ожидаемый результат: “Неверно указан срок действия карты”.

5. Год в прошлом
   Тестовые данные: Год: 22 (при текущем 2025)
   Ожидаемый результат: “Истёк срок действия карты”.

6. Пустое поле “Владелец”
   Тестовые данные: Поле “Владелец” пустое
   Ожидаемый результат: “Поле обязательно для заполнения”.

7. Владелец на кириллице
   Тестовые данные: Владелец: Иван Иванов
   Ожидаемый результат: “Неверный формат”.

8. CVC/CVV содержит меньше 3 цифр
   Тестовые данные: 12
   Ожидаемый результат: “Неверный формат”.

## Инструменты
| Инструмент             | Назначение                                                                | Причина выбора                                                                |
| ---------------------- | ------------------------------------------------------------------------- | ----------------------------------------------------------------------------- |
| Java                   | Язык программирования                                                     | Хорошо подходит для автотестов, легко интегрируется с Selenide, JUnit, Allure |
| Gradle                 | Система сборки                                                            | Позволяет гибко управлять зависимостями, прост в настройке CI                 |
| Selenide               | UI-тестирование                                                           | Упрощает работу с браузером, автоматическое ожидание, лаконичный синтаксис    |
| REST-assured           | API-тестирование                                                          | Прост в использовании, легко подключается к проекту на Java                   |
| JUnit 5                | Фреймворк для юнит- и интеграционных тестов                               | Совместим со всеми используемыми библиотеками, гибкий и широко поддерживается |
| Allure                 | Генерация отчётов                                                         | Удобный визуальный отчёт, поддерживает вложения, шаги, скриншоты              |
| Docker Compose         | Настройка и запуск окружения с приложением, эмулятором и БД               | Упрощает развертывание и тестирование на локальной машине и в CI              |
| MySQL / PostgreSQL     | СУБД для хранения данных, используются в разных вариантах запуска проекта | Позволяют проверить корректную работу системы на разных базах данных          |

## Риски
1. Отсутствие уникальных идентификаторов (data-testid, id) у элементов интерфейса — может затруднить написание UI-тестов.
2. Изменение API или структуры возвращаемых данных на стороне эмулятора банка в процессе разработки — может привести к падению тестов.
3. Нестабильность CI при запуске headless-браузера (особенно в GitHub Actions).
4. Изменения в вёрстке страницы могут повлиять на селекторы.
5. Проблемы с запуском приложения в Docker-среде (ошибки порта, сеть, БД).
6. Возможное отсутствие или задержка записи данных в БД (рассинхронизация).

## Оценка времени (интервальная)
- Настройка окружения: 6–10 часов.
- Написание тестов: 20–30 часов.
- Настройка CI и отчётов: 6–10 часов.
- Подготовка документации: 3–5 часов.
**Итого:** 35–55 часов.

## План сдачи
- Автотесты: к дате 
- Прогон и отчёты: к дате 

